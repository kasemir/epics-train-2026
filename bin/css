#!/bin/sh

# When deploying, change "TOP"
# to the absolute installation path
# TOP="."

TOP=$HOME/training/tools/phoebus/phoebus-product/target
JAR=`echo ${TOP}/product-*.jar`


export JDK_JAVA_OPTIONS="-Xms500M -Xmx2G"

JDK_JAVA_OPTIONS+=" -Dfile.encoding=UTF-8 "

# When using Java 14+:
JDK_JAVA_OPTIONS+=" -XX:+ShowCodeDetailsInExceptionMessages "

# Don't start a CA Repeater
JDK_JAVA_OPTIONS+=" -DCA_DISABLE_REPEATER=true "

# Disable warnings
JDK_JAVA_OPTIONS+=" -Dnashorn.args=--no-deprecation-warning "

OPT="-settings $HOME/training/tools/css_training.ini"

if [ "x$1" == "x-main"  -o  "x$1" == "x-help" ]
then
  # Run MEDM converter etc. in foreground
  java -jar $JAR $OPT "$@"
else
  # Run UI as separate thread with log file
  java -jar $JAR $OPT "$@" >/tmp/css.log 2>&1 &
fi
